<script>
  $('#nav_menu_user_resource').addClass('active')
</script>

<div class="container-fluid main-container">

  <%= render(:partial => "/sidebar/resource") %>
  <div class="main-content clearfix">
    <div class="breadcrumbs" id="breadcrumbs">
      <ul class="breadcrumb">
        <li>
          <i class="icon-home"></i>
          运行资源

			<span class="divider">
				<i class="icon-angle-right"></i>
			</span>
        </li>
        <li class="active">虚拟机管理</li>
      </ul>
      <!--.breadcrumb-->
    </div>
    <div id="content" class="page-content">
      <div class="page-header position-relative">
        <h1>
          虚拟机管理
          <small>
            <i class="icon-double-angle-right"></i>
            <span>基本信息</span>
          </small>
        </h1>
      </div>
    
      <div class="row-fluid">
        <div class="span4">
        <div class="profile-user-info profile-user-info-striped" id="unitmacinfo" >
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟机名称</div>
            <div class="profile-info-value">
              <span id="unitmacname">123456</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟基础架构</div>
            <div class="profile-info-value">
              <span id="unitmacap">RPS-VCENTER</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟集群编码</div>
            <div class="profile-info-value">
              <span id="unitmaccode">APPcore2</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟资源池编码</div>
            <div class="profile-info-value">
              <span id="unitmacpcode">sijajgjsd</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">内存总量</div>
            <div class="profile-info-value">
              <span id="unitmacsize">16384MB</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">CPU频率</div>
            <div class="profile-info-value">
              <span id="unitmaccpu">19192MHz</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">CPU个数</div>
            <div class="profile-info-value">
              <span id="unitmacnum">8</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟FC-HBA卡个数</div>
            <div class="profile-info-value">
              <span id="unitmacfc">0</span>
            </div>
          </div>
                    <div class="profile-info-row">
            <div class="profile-info-name">硬盘容量</div>
            <div class="profile-info-value">
              <span id="unitmacrange">102400MB</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">管理员用户名</div>
            <div class="profile-info-value">
              <span id="unitmacadmin">admin</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">所属业务</div>
            <div class="profile-info-value">
              <span id="unitmacbus">test</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">描述</div>
            <div class="profile-info-value">
              <span id="unitmacdes">1234</span>
            </div>
          </div>
        </div>
        </div>
        <div class="span4" style="margin-left:0">
          <div class="profile-user-info profile-user-info-striped" id="unitserinfo" >
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟机编号</div>
            <div class="profile-info-value">
              <span id="unitmacno">123456mslmmsklagx</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟数据中心</div>
            <div class="profile-info-value">
              <span id="unitmaccen">WGZYC-DC</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">所在物理机IP</div>
            <div class="profile-info-value">
              <span id="unitmacip">192.168.20.100</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">映射编码</div>
            <div class="profile-info-value">
              <span id="unitmacycode">vm-2170</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">已使用内存总量</div>
            <div class="profile-info-value">
              <span id="unitmacusesize">163MB</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">已使用CPU频率</div>
            <div class="profile-info-value">
              <span id="unitmaccpuuse">215MHz</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">虚拟SCSI卡个数</div>
            <div class="profile-info-value">
              <span id="unitmacscsi">1</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">网卡个数</div>
            <div class="profile-info-value">
              <span id="unitmacnet">0</span>
            </div>
          </div>
                    <div class="profile-info-row">
            <div class="profile-info-name">虚拟机操作系统</div>
            <div class="profile-info-value">
              <span id="unitmacsys">ubuntu12.04</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">密码</div>
            <div class="profile-info-value">
              <span id="unitmacpwd">123456</span>
            </div>
          </div>
          <div class="profile-info-row">
            <div class="profile-info-name">供应商</div>
            <div class="profile-info-value">
              <span id="unitmacsername">VMWARE</span>
            </div>
          </div>
         
        </div> 
        </div>
        
        <div class="span4">
            <div class="widget-box transparent">
      <div class="widget-body">
        <div class="widget-main padding-16">
          <div class="row-fluid">
            <div class="grid4 center">
              <button class="btn btn-app btn-light btn-mini">
                <i class="icon-play bigger-140"></i>
                启动
              </button>

            </div>
            <div class="grid4 center">
              <button class="btn btn-app btn-light btn-mini">
                <i class="icon-repeat bigger-140"></i>
                重启
              </button>
            </div>
            <div class="grid4 center">
              <button class="btn btn-app btn-light btn-mini">
                <i class="icon-stop bigger-140"></i>
                停止
              </button>
            </div>
            <div class="grid4 center">
              <a href="#openVmrc" role="button" data-toggle="modal" class="btn btn-app btn-light btn-mini">
                <i class="icon-desktop bigger-140"></i>
                控制台 </a>
            </div>
          </div>
        </div>
      </div>
    </div>
					
  <div class="widget-box transparent">
      <div class="widget-header widget-header-flat">
        <h4 class="lighter">路由管理</h4>
      </div>
      <div class="widget-body">
        <div class="widget-main no-padding">
          <table class="table table-striped table-bordered">
						<thead>
						<tr>
							<th>公网IP地址</th>
							<th>内网IP地址</th>
							<th>操作</th>
						</tr>
						</thead>
						<tbody>
						<tr>
							<td>218.205.48.215</td>
							<td>192.168.201.130</td>
							<td>
							 	<a href="/resource/business/123?ip='218.205'&#modal-form-addip" role="button" class="btn btn-info btn-mini" data-toggle="modal"> <i class='icon-zoom-in icon-white'></i><h style='color:#FFF'>申请IP</h> </a>
								<%= link_to raw("<i class='icon-trash icon-white'></i><h style='color:#FFF'>释放IP</h>"), {:controller => "resource", :action => "deletecontainer", :id =>"1234"}, :class => "btn btn-danger btn-mini" %>
							</td>
						</tr>
						</tbody>
					</table>
        </div>
      </div>
    </div>  
  </div>      
      </div><div id="modal-form-addip" class="modal hide fade" tabindex="-1">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h4 class="blue bigger">请填写下列信息</h4>
  </div>

  <div class="modal-body overflow-visible">
    <div class="row-fluid">


      <div class="span7">
        <%= form_tag url_for(), :class => "form-horizontal", :style=>"margin-bottom:0px",:method => :post do %>
        <div class="control-group">
          <label class="control-label"  for="form-field-select-3">所属网络子网</label>

          <div class="controls">
            <select data-placeholder="选择网络子网" id="ipnetwork">
              <option value="" > ---选择网络子网---</option>
              <option value="1" >dmz区 </option>
              <option value="2" >测试区  </option>
              <option value="3" >高性能区  </option>
              <option value="4">核心生产区  </option>
              <option value="5" >存储网络区   </option>
            </select>
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="form-field-com">所属业务系统</label>

          <div class="controls">
            <input class="input-small" type="text" value="Test" disabled="disabled"  />
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn btn-small" data-dismiss="modal">
      <i class="icon-remove"></i>
      取消
    </button>

    <button class="btn btn-small btn-primary">
      <i class="icon-ok"></i>
      确认申请
    </button>
  </div>
</div>
</br>

      <div class="row-fluid">
        <div class="span6">
          <div class="widget-box transparent">
      			<div class="widget-header widget-header-flat">
        			<h4 class="lighter">CPU使用情况</h4>
      			</div>
		    		<div class="widget-body">
		      		<div class="widget-main no-padding">
		      		</br>
						    <div id="upchartdiv1" align="center">FusionGadgets</div>
						    <script type="text/javascript">
						      var myupChart1 = new FusionCharts("<%= asset_path "FusionCharts/Pie2D.swf"%>", "myChartId", "400", "300", "0", "0");
						      myupChart1.setDataXML("<chart palette='3'><set label='未使用' value='4' /><set label='已使用' value='5' /></chart>");
						      //myChart.setDataXML(str);
						      myupChart1.render("upchartdiv1");
						    </script>
		      		</div>
        		</div>
        	</div>
        </div>
        <div class="span6">
          <div class="widget-box transparent">
      			<div class="widget-header widget-header-flat">
        			<h4 class="lighter">内存使用情况</h4>
      			</div>
		    		<div class="widget-body">
		      		<div class="widget-main no-padding">
		      			</br>
						    <div id="upchartdiv2" align="center">FusionGadgets</div>
						    <script type="text/javascript">
						      var myupChart1 = new FusionCharts("<%= asset_path "FusionCharts/Pie2D.swf"%>", "myChartId", "400", "300", "0", "0");
						      myupChart1.setDataXML("<chart palette='3'><set label='未使用' value='10' /><set label='已使用' value='2' /></chart>");
						      //myChart.setDataXML(str);
						      myupChart1.render("upchartdiv2");
						    </script>
						  </div>
      			</div>
        	</div>
      	</div>
			</div>
 			<div class="row-fluid">
 				<div class="span6">
        	<div class="widget-box transparent">
					
      			<div class="widget-header widget-header-flat">
        			<h4 class="lighter">已安装软件列表</h4>
      			</div>
		    		<div class="widget-body">
		      		<div class="widget-main no-padding">

		      			<table class="table table-striped">
									<thead>
									<tr>
										<th>软件名称</th>
										<th>版本</th>
										<th>用户名</th>
										<th>密码</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>tomcat</td>
										<td>6.0</td>
										<td>test</td>
										<td>123456</td>
									</tr>
									</tbody>
								</table>
		      		</div>
		     		</div>
		     	</div>
				</div>	
    	</div>
  	</div>

</div>
  </div>


<div id="openVmrc" class="modal hide fade" tabindex="-1" style="width:1000px;margin-left: -500px;border: 2px solid;">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h4 class="blue bigger">虚拟机控制台</h4>
  </div>

  <div class="modal-body " style="min-height:520px">
  <table>
    <tr>
      <td>
        <div style="padding: 10px">
          <!-- 操作指令窗口 -->
          <table style="text-align: center">
            <tr>
              <td><a onclick="setFullscreen()"><img alt="全屏"
                                                    src="/assets/vmrcFullScreen.png"
                                                    width="80px" height="80px"></a></td>
              <td><a onclick="disconnect()"> <img alt="断开连接"
                                                  src="/assets/vmrcDisconnect.png"
                                                  width="80px" height="80px">
              </a></td>
            </tr>
            <tr>
              <td>全屏</td>
              <td>断开连接</td>
            </tr>
            <tr>
              <td colspan="2">提示：按住CTRL+ALT按键，可将鼠标焦点移出控制台窗口</td>
            </tr>
          </table>
          <br />
          <!-- 日志窗口 -->
          <div
          style="overflow: auto; width: 250px; height: 340px; border: solid 2px grey;"
          id="msgBox">
            <hr />
            <b>
              <center>操作日志</center>
            </b>
            <hr />
          </div>
        </div>
      </td>
      <td>
        <!-- 控制台窗口 -->
        <div style="border: solid 2px grey; width: 600px; height: 500px;"
             id="pluginPanel"></div>
      </td>
    </tr>
  </table>
    </div>
  <script src="/assets/js/vmrc.js"></script>
</div>